# slider の機能


## <u>データ・ロギングの機能</u>

### IoT 基本機能
slider は Raspberry Pi に接続された各種センサやカメラデバイスからデータや画像を取得し、以下の処理を行います

- 本体SD または USBに接続した記憶媒体への保存
- monitor サービス等、外部 IoT サービスへの送信
- LCD への表示
- 音声での読み上げ

<img src="pic/ss.2016-12-11 17.09.16.png" width="49%">
<img src="pic/ss.2016-12-11 17.25.44.png" width="49%">


IoT 基本機能は一定時間で繰り返し実行する事も、外部イベント（人感センサーや漏水センサー等の警報）を受けて実行する事も、ならびにそれらを同時に行うことも可能です

### センサデータの取得
いくつかの標準的なセンサーモジュールについて対応するライブラリを用意している他、提供する柔軟な設定ファイルとラッパークラスを利用して Raspberry Pi に接続できるいろいろなセンサーモジュールを上記の IoT 基本機能に組み込むことができます

設定は柔軟で、複合的なセンサ（温度＆湿度、３軸加速度＆角速度＆温度、等）についても一回のスキャンで取得できる個々の異なる種類のデータに対するロジックを個々に設定できます

### 画像の取得
Raspberry Pi 純正のカメラモジュール及び USB 接続の WebCam に対応しています。USB ハブ等でポートの数を増やせば数十個の WebCam を接続し、**一台の slider で数十箇所の画像を取得** することができます。数百円程度の安価な WebCam, 1m あたり 100円程度の安価な USB extension ケーブルを複数用意することにより、**広大な範囲の数十箇所の監視を数万円程度の安価な予算で実現** することが可能です

## <u>PCからの利用</u>
Raspberry Pi の SD カードは通常は PC から読み書きすることができませんが、slider の SD カードは Window や Mac のような PC から読み書きできる拡張boot領域を用意してあります。

<img src="pic/ss.2016-12-11 16.57.55-2.png" width="49%">
<img src="pic/ss.2016-12-11 17.04.39.png" width="49%">

IoT 基本機能で取得したセンサデータや画像はこの領域に保存されるので PC で普通に読むことができます

<img src="pic/ss.2016-12-11 17.09.16.png" width="49%">

WiFi アクセスポイントの接続情報の登録、IoT 基本機能のデータ取得間隔、ネットワーク機能のモード切り替えなどの設定もこの領域に設定ファイルを用意してあり、Raspberry Pi にログインすることなく PC で簡単に行うことができます

## <u>ネットワーク機能</u>

### WiFi アクセスポイントへの自己登録
PC から読み書きできる拡張boot領域に、アクセスポイントへの接続情報を書いたファイルを用意しておくと起動時の最初に自動的に WiFi の設定を行う addwpaというオリジナルな仕組を用意してあります

### ３種類の WiFi モード
PC から読み書きできる拡張boot領域の設定ファイルの変更で、下記３種類のモードで起動することができます

- 通常モード：　登録された WiFi アクセスポイントに接続します

- アドホックモード：　アクセスポイントを利用せず、複数の端末が互いに接続するモードです。このモードでの起動時は移動性とマルチホップをサポートするモバイルアドホックネットワークの機能を olsrd で提供します  
見通しが良い等の条件がよければ数十メートル毎に中継用の slider を用意することで無線のネットワークを安価かつ簡単に構築することができます
<img src="pic/ss.2016-12-07 18.51.12.png" width="49%">
モバイルアドホックネットワークは定期的に周囲の仲間を検知して情報の経路情報を自動更新するので、slider が動き回るモバイル環境であっても、ある程度の重複度があればネットワーク機能は維持される利点があります。

- ルーターモード：　slider 自身がモバイルルーターとしてネットワーク機能を提供します。WiFi アクセスポイントを提供し、DHCP サーバとしてドメイン設定と IPアドレスの配布をおこないます
<img src="pic/ss.2016-12-07 18.50.46.png" width="49%">

### USB 3G ドングル自動接続
安価な中古の USB 3G ドングルを利用し、携帯電話網を経由してネットワークに接続することができます

## <u>サーバ機能</u>

### monitor サービス
slider 自身を monitor サービスのサーバとして機能させることができます

### Backup Pi

### Say
slider を遠隔から喋らせることができます

### MQTT
slider を Websocket 対応の MQTT Broker として機能させることができます


##<u>セキュリティ機能</u>

### セキュアストレージの提供
アプリケーション及びその設定ファイルは暗号化されたストレージに保存されるので、盗難等の被害に対して情報を保護することができます

### コピープロテクション
他の SDカードにコピーされた slider は起動しません。slider を利用して作成したサービス事態がコピーされることを防止します

[^1]センサ
